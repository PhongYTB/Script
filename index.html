<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phong Hub - Công Cụ & Giải Trí</title>
    <!-- Tải Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tải Thư viện Crypto-JS cho mã hóa AES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        :root {
            --primary: #8b5cf6; /* Violet */
            --primary-dark: #7c3aed;
            --secondary: #10b981; /* Emerald */
            --bg-dark: #1f2937;
            --card-bg: #374151;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: #e5e7eb;
        }
        .sidebar {
            background-color: #111827;
        }
        .nav-item {
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }
        .nav-item.active {
            border-left-color: var(--primary);
            background-color: #374151;
            color: #fff;
        }
        /* Custom Scrollbar for better UX */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1f2937;
        }
        .copy-btn {
            transition: all 0.3s;
        }

        /* Đảm bảo nội dung chính được hiển thị sau khi loading container bị xóa */
        #main-content {
            opacity: 1; 
            transition: opacity 0.5s;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col md:flex-row">

    <!-- Custom Modal Structure -->
    <div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden items-center justify-center p-4">
        <div class="bg-card-bg p-6 rounded-xl shadow-2xl max-w-sm w-full border-t-4 border-primary">
            <h3 id="modal-title" class="text-xl font-bold mb-3 text-white">Thông báo</h3>
            <p id="modal-content" class="text-gray-300 mb-6"></p>
            <div id="modal-actions" class="flex justify-end space-x-3">
                <button id="modal-close" onclick="hideModal()" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-white font-semibold transition">Đóng</button>
            </div>
        </div>
    </div>

    <!-- Sidebar (Menu Cố Định) -->
    <nav class="sidebar md:w-64 w-full md:min-h-screen p-4 flex md:flex-col flex-row overflow-x-auto md:overflow-y-auto custom-scrollbar shadow-xl md:shadow-none">
        <h1 class="text-3xl font-extrabold text-primary mb-6 whitespace-nowrap">Phong Hub</h1>
        <div id="nav-links" class="flex md:flex-col flex-row space-x-3 md:space-x-0 md:space-y-2">
            <!-- Navigation links will be rendered here -->
        </div>
        <!-- Thêm phần Giới Thiệu cố định ở cuối cho desktop -->
        <div class="mt-auto pt-6 hidden md:block">
            <h4 class="text-sm font-semibold text-gray-500 mb-1">Created by:</h4>
            <p class="text-sm text-gray-400">phongYTB</p>
            <a href="https://tiktok.com/@hnphong_anime" target="_blank" class="text-sm text-primary hover:text-primary-dark transition">
                TikTok: hnphong_anime
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="flex-grow p-4 md:p-8">
        <!-- Message này được đặt ở đây và sẽ bị xóa NGAY LẬP TỨC khi script chạy -->
        <div id="initial-loading-container" class="absolute inset-0 bg-bg-dark flex items-center justify-center z-40">
            <p id="loading-message" class="text-xl text-gray-400 animate-pulse">Đang tải nội dung, vui lòng chờ...</p>
        </div>
    </main>

    <script>
        // --- GLOBAL STATE ---
        const APP_STATE = {
            view: 'gioi-thieu', // current active section
            encryption: {
                key: "Roland",
            },
            keyPremium: {
                // Trạng thái chỉ giữ trong phiên làm việc hiện tại.
                isValid: false, 
                currentUserUUID: crypto.randomUUID(), 
            },
            scripts: {
                currentCategory: 'brainrot',
                searchQuery: '', // Thêm trạng thái tìm kiếm
            },
        };

        // --- DATA BỘ DỮ LIỆU CỨNG ---
        const ENCRYPTION_TYPES = [
            { id: 'base64', name: 'Base64 (Mã hóa cơ bản)' },
            { id: 'url', name: 'URL Encoding (Mã hóa Web)' },
            { id: 'caesar', name: 'Caesar Cipher (Dịch 3 ký tự)' },
            { id: 'aes', name: 'AES (Mật mã Mạnh - Key: Roland)' },
        ];

        const SCRIPT_DATA = {
            // Dữ liệu Scripts giữ nguyên như trước
            brainrot: [
                { name: "Lemon Hub", script: 'loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/ffdfeadf0af798741806ea404682a938.lua"))()' },
                { name: "Arbix Hub New", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Youifpg/Steal-a-Brianrot/refs/heads/main/ArbixHubBEST.lua"))()' },
                { name: "Blue X Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Dev-BlueX/BlueX-Hub/refs/heads/main/Main.lua"))()' },
                { name: "Dencrycode", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Estevansit0/KJJK/refs/heads/main/PusarX-loader.lua"))()' },
                { name: "Ugly Hub", script: 'script_key="Your_Key"; loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/77d72e34c893b67ea49b8d62d1a18485.lua"))()' },
                { name: "Lumin Hub", script: 'loadstring(game:HttpGet("https://lumin-hub.lol/loader.lua"))()' },
                { name: "Tuấn Anh IOS", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/AnhTuanDzai-Hub/TuanAnhIOS/refs/heads/main/BrainRotVip"))()' },
                { name: "Steel A Mod", script: 'loadstring(game:HttpGet("https://rawscripts.net/raw/Steal-a-Brainrot-MODDED-INSTANT-STEALS-EASY-CASH-AND-MORE-KEYLESS-42520"))()' },
                { name: "Chilli Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"))()' },
                { name: "Steel a Brainnot", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Estevansit0/KJJK/refs/heads/main/PusarX-loader.lua"))()' },
                { name: "Vakat Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/vokamc/main/refs/heads/main/vokathub"))()' },
                { name: "Open GUI", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/iw929wiwiw/Teleport-Speed/refs/heads/main/Fall%20Down"))()' },
                { name: "Makal Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/DoliScriptz/loader/refs/heads/main/main.lua", true))()' },
                { name: "Arbix Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Youifpg/Steal-a-Brianrot/refs/heads/main/Instant%20steal.lua"))()' },
                { name: "Xxlegendxx", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Akbar123s/Script-Roblox-/refs/heads/main/nabaruBrainrot"))()' },
                { name: "Delfi Hub", script: 'loadstring(game:HttpGet("https://pastefy.app/eCzs7DNQ/raw"))()' },
                { name: "Ronix Hub", script: 'loadstring(game:HttpGet("pastebin.com/raw/HFx6faQY"))()' },
                { name: "AvOnTop Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Ayvathion/AV-On-Top/refs/heads/main/Loader.lua"))()' },
                { name: "Lurk Hack", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/egor2078f/lurkhackv4/main/main.lua"))()' },
                { name: "Timmy Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/WinzeTim/timmyhack2/refs/heads/main/stealabrainrot.lua"))()' },
            ],
            garden: [
                { name: "ThundeZ Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/ThundarZ/Welcome/refs/heads/main/Main/GaG/Main.lua"))()' },
                { name: "Auto Tự Động Chơi", script: 'loadstring(game:HttpGet("https://pastefy.app/OT23uo9U/raw"))()' },
                { name: "Speed Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua"))()' },
                { name: "Nat Hub", script: 'loadstring(game:HttpGet("https://get.nathub.xyz/loader"))()' },
                { name: "OMG Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Omgshit/Scripts/main/MainLoader.lua"))()' },
                { name: "Lumin Hub", script: 'loadstring(game:HttpGet("https://lumin-hub.lol/loader.lua"))()' },
                { name: "Ransom Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/imFiftyyOne/RansomHub/refs/heads/main/Gag"))()' },
                { name: "No-Lag V2 Hub", script: 'loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/3b2169cf53bc6104dabe8e19562e5cc2.lua"))()' },
                { name: "No-Lag V1 Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/refs/heads/main/Loader/LoaderV1.lua"))()' },
                { name: "Moma Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/n3xkxp3rl/Moma-Hub/refs/heads/main/GrowAGarden.lua"))()' },
                { name: "Thunder Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/ThundarZ/Welcome/refs/heads/main/Main/GaG/Main.lua"))()' },
                { name: "PhantFluxReal", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/sudaisontopxd/PanScriptXSudaisScript/refs/heads/main/PhantFluxReal.lua"))()' },
                { name: "Kura Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/IQ"))()' },
                { name: "Tora Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/gumanba/Scripts/main/GrowaGarden"))()' },
                { name: "Lion Hub Kaitun", script: 'loadstring(game:HttpGet("https://pastefy.app/KAZUgCRO/raw"))()' },
                { name: "AVOnTop", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Ayvathion/AV-On-Top/refs/heads/main/Loader.lua"))()' },
                { name: "Tbao Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/game/refs/heads/main/TbaoHubGrowGarden"))()' },
                { name: "Y Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/yue-os/script/refs/heads/main/Y-Hub"))()' },
                { name: "Galactic Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/GalacticScripts/Galactic-Hub/refs/heads/main/Galactic%20Hub"))()' },
                { name: "Beecon Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/BaconBossScript/BeeconHub/main/BeeconHub"))()' },
                { name: "Kenniel Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Kenniel123/Grow-a-garden/refs/heads/main/Grow%20A%20Garden"))()' },
                { name: "Gag Dupe Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Bern0va/Scripts/refs/heads/main/gag-dupe.lua"))()' },
                { name: "Blue Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/tesghg/Grow-a-Garden/main/ameicaa_Grow_A_Garden.lua"))()' },
                { name: "Nicuse Hub", script: 'loadstring(game:HttpGet("https://nicuse.xyz/MainHub.lua"))()' },
                { name: "Alchemy Hub", script: 'loadstring(game:HttpGet("https://scripts.alchemyhub.xyz"))()' },
                { name: "Grow A Garden V0.71", script: 'loadstring(game:HttpGet("https://lunor.dev/loader"))()' },
                { name: "H4xScr Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/H4xScripts/Loader/refs/heads/main/loader2.lua"))()' },
                { name: "OP Script Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/nf-36/Koronis/refs/heads/main/Scripts/Loader.lua"))()' },
                { name: "Lunacy Hub", script: 'loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/1c1979f776d3e81869cf5f49f91900a7.lua"))()' },
                { name: "Native Hub", script: 'script_key="PASTE_KEY_HERE"; (loadstring or load)(game:HttpGet("https://getnative.cc/script/loader"))()' },
                { name: "Vexeze Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Dex-Bear/Vxezehub/refs/heads/main/VxezeHubMain"))()' },
                { name: "Dinga Hub", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Dingarik/Dingarik/refs/heads/main/GrowAGarden"))()' },
                { name: "Grow A Garden 1 (mauscripts)", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/nootmaus/GrowAAGarden/refs/heads/main/mauscripts"))()' },
                { name: "Grow A Garden 1 (gumanba)", script: 'loadstring(game:HttpGet("https://raw.githubusercontent.com/gumanba/Scripts/refs/heads/main/GrowaGarden"))()' },
                { name: "Doggo Hub", script: 'loadstring(game:HttpGet("https://cheater.fun/hacks_roblox/10886-grow-a-garden-script.html"))()' },
            ]
        };

        const CLIENT_DATA = [
            { name: "Delta X VNG", update: "23/09/2025", status: "Hoạt Động", version: "V2.690", antiBan: "Có", link: "https://www.mediafire.com/file/sr0uoqc0cfqmv4r/Delta_Vng-2.690.721_Up.apk/file" },
            { name: "Hack Fluxus", update: "04/09/2025", status: "Không Hoạt Động", version: "V2.688", antiBan: "Có", link: "https://www.mediafire.com/folder/hdnexqcju1bfq/Fluxus" },
            { name: "Hack Arceus X", update: "23/09/2025", status: "Hoạt Động", version: "V2.690", antiBan: "Có", link: "https://www.mediafire.com/file/8as090ll3x8fup6/ArceusX.2.691.868.apk/file" },
            { name: "Pixel Launcher Lite", update: "N/A", status: "Tool", version: "Mod Pro", antiBan: "N/A", link: "https://www.mediafire.com/file/dllutrxsomivrhw/Launcher_Lite.apk/file" },
            { name: "F1 VM VIP APK", update: "N/A", status: "Tool", version: "Mod VIP", antiBan: "N/A", link: "https://www.mediafire.com/file/fwpstknlrszwsys/F1VM_V1.3.1.2.01_Mod_VIP.apk/file" },
        ];

        const ACCOUNT_DATA = [
            { price: '50k', game: 'FF Random', image: 'https://placehold.co/150x250/22c55e/ffffff?text=FF+50K', details: 'Acc Free Fire ngẫu nhiên.' },
            { price: '100k', game: 'FF Random', image: 'https://placehold.co/150x250/22c55e/ffffff?text=FF+100K', details: 'Acc Free Fire ngẫu nhiên VIP hơn.' },
            { price: '150k', game: 'FF Random', image: 'https://placehold.co/150x250/22c55e/ffffff?text=FF+150K', details: 'Acc Free Fire ngẫu nhiên siêu VIP.' },
            { price: '70k', game: 'Roblox Tùy Chọn', image: 'https://placehold.co/150x250/8b5cf6/ffffff?text=Roblox+70K', details: 'Acc Roblox tùy chọn cơ bản.' },
            { price: '80k', game: 'Roblox Tùy Chọn', image: 'https://placehold.co/150x250/8b5cf6/ffffff?text=Roblox+80K', details: 'Acc Roblox tùy chọn Tốt.' },
            { price: '10k', game: 'Roblox Tùy Chọn', image: 'https://placehold.co/150x250/8b5cf6/ffffff?text=Roblox+10K', details: 'Acc Roblox tùy chọn Rẻ nhất.' },
            { price: '300k', game: 'Roblox Tùy Chọn', image: 'https://placehold.co/150x250/8b5cf6/ffffff?text=Roblox+300K', details: 'Acc Roblox tùy chọn Max VIP.' },
            { price: '210k', game: 'Roblox Tùy Chọn', image: 'https://placehold.co/150x250/8b5cf6/ffffff?text=Roblox+210K', details: 'Acc Roblox tùy chọn VIP.' },
        ];


        // --- ENCRYPTION/DECRYPTION LOGIC ---

        const ENCRYPTION_SECRET_KEY = APP_STATE.encryption.key; // "Roland"

        const encodeDecode = (text, type, mode) => {
            if (!text) return '';
            if (type === 'aes' && typeof CryptoJS === 'undefined') {
                 return 'Lỗi: Thư viện mã hóa AES chưa tải xong. Vui lòng tải lại trang.';
            }

            try {
                switch (type) {
                    case 'base64':
                        if (mode === 'encrypt') {
                            return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(text));
                        } else {
                            // Cần kiểm tra định dạng Base64 trước khi giải mã
                            if (text.length % 4 !== 0 || /[^A-Za-z0-9+/=]/.test(text)) {
                                return 'Lỗi: Chuỗi Base64 không hợp lệ.';
                            }
                            return CryptoJS.enc.Base64.parse(text).toString(CryptoJS.enc.Utf8);
                        }
                    case 'url':
                        if (mode === 'encrypt') {
                            return encodeURIComponent(text);
                        } else {
                            return decodeURIComponent(text);
                        }
                    case 'caesar':
                        // Dịch 3 ký tự (Shift 3)
                        return text.split('').map(char => {
                            const code = char.charCodeAt(0);
                            let shift = mode === 'encrypt' ? 3 : -3;
                            if ((code >= 65 && code <= 90) || (code >= 97 && code <= 122) || (code >= 48 && code <= 57)) {
                                const base = (code >= 65 && code <= 90) ? 65 : (code >= 97 && code <= 122) ? 97 : 48;
                                const max = (code >= 65 && code <= 90) ? 90 : (code >= 97 && code <= 122) ? 122 : 57;
                                const wrap = (max - base) + 1; // 26 for letters, 10 for numbers
                                
                                let newCode = code - base;
                                newCode = (newCode + shift) % wrap;
                                
                                if (newCode < 0) {
                                    newCode += wrap;
                                }

                                return String.fromCharCode(newCode + base);
                            }
                            return char; 
                        }).join('');
                    case 'aes':
                        if (mode === 'encrypt') {
                            return CryptoJS.AES.encrypt(text, ENCRYPTION_SECRET_KEY).toString();
                        } else {
                            const bytes = CryptoJS.AES.decrypt(text, ENCRYPTION_SECRET_KEY);
                            if (!bytes.sigBytes || bytes.sigBytes === 0) {
                                return 'Lỗi: Key AES sai hoặc dữ liệu không phải mật mã AES hợp lệ.';
                            }
                            try {
                                const result = bytes.toString(CryptoJS.enc.Utf8);
                                // Kiểm tra nếu kết quả là chuỗi rỗng sau khi giải mã thất bại một phần
                                return result || 'Lỗi: Giải mã thành công nhưng kết quả là chuỗi rỗng.';
                            } catch (e) {
                                return 'Lỗi: Dữ liệu giải mã không phải là UTF-8 hợp lệ.';
                            }
                        }
                    default:
                        return 'Lỗi: Loại mã hóa không hợp lệ.';
                }
            } catch (e) {
                return `Lỗi xử lý: ${e.message}. Dữ liệu không hợp lệ cho loại mã hóa/giải mã này.`;
            }
        };

        // --- COMMON UI FUNCTIONS ---

        const mainContent = document.getElementById('main-content');
        const navLinks = document.getElementById('nav-links');
        const modal = document.getElemen
